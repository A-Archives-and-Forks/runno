<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="stylesheet" href="/src/main.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Runno</title>
  </head>
  <body class="font-tobias text-white bg-black">
    <main class="bg-black">
      <div class="bg-sunset pb-8 relative">
        <runno-starfield class="pointer-events-none">
          <img src="images/star.svg" />
        </runno-starfield>
        <header class="py-4">
          <a href="/" title="Runno" class="absolute">
            <h1 class="text-lg">
              <img src="images/logo.svg" alt="Runno" />
            </h1>
          </a>
          <nav class="font-sans container mx-auto flex justify-end z-10">
            <a
              target="_blank"
              href="https://github.com/taybenlor/runno"
              class="inline-flex font-medium hover:text-yellow group"
            >
              <img
                src="images/github-light.png"
                class="w-6 h-6 mr-2 block group-hover:hidden"
              />
              <img
                src="images/github-yellow.png"
                class="w-6 h-6 mr-2 hidden group-hover:block"
              />
              GitHub
            </a>
          </nav>
        </header>

        <img class="absolute bottom-0 right-0" src="images/sun.svg" />
        <div class="container mx-auto relative">
          <h1 class="text-5xl font-bold text-center my-8">
            Make your code samples Runno.
          </h1>
          <div class="w-1/3 mx-auto">
            <hr class="border-t border-yellow my-2 h-0" />
            <hr class="w-4/5 border-t border-yellow my-2 h-0 mx-auto" />
            <hr class="w-3/5 border-t border-yellow my-2 h-0 mx-auto" />
            <hr class="w-2/5 border-t border-yellow my-2 h-0 mx-auto" />
          </div>

          <div class="flex items-stretch py-16 font-mono">
            <form class="flex flex-col flex-grow mr-8">
              <div class="relative border border-yellow">
                <label
                  class="
                    absolute
                    -top-3
                    left-4
                    px-4
                    bg-navy
                    text-sm text-yellow
                  "
                  for="code"
                >
                  Your code
                </label>
                <textarea
                  spellcheck="false"
                  class="w-full h-[35vh] p-2 bg-navy"
                  id="code"
                >
print("Hello, World!")
name = input("What's your name? ")
print(f"G'day {name}, welcome to Runno.")
</textarea
                >
              </div>
              <div
                class="
                  border-l border-r border-yellow
                  p-2
                  px-4
                  flex
                  justify-between
                "
              >
                <label for="runtime-select">
                  <span class="text-lightBlue">Runtime:</span>
                  <select id="runtime-select" class="bg-navy">
                    <option value="python" selected default>
                      Python (CPython)
                    </option>
                    <option value="quickjs">JavaScript (QuickJS)</option>
                    <option value="sqlite">SQL (SQLite)</option>
                    <option value="clang">C (clang)</option>
                    <option value="clangpp">C++ (clang)</option>
                  </select>
                </label>

                <fieldset>
                  <label class="mr-4">
                    <input id="autorun-checkbox" type="checkbox" />
                    Autorun
                  </label>

                  <label>
                    <input id="editor-checkbox" type="checkbox" checked />
                    Code editor
                  </label>
                </fieldset>
              </div>
              <div class="relative border border-yellow">
                <label
                  spellcheck="false"
                  class="
                    absolute
                    -bottom-2
                    left-4
                    px-4
                    bg-navy
                    text-sm text-yellow
                  "
                  for="embed"
                >
                  Embed this
                </label>
                <textarea class="w-full h-32 p-2 bg-navy" id="embed"></textarea>
              </div>
            </form>

            <div class="flex-grow flex flex-col items-stretch">
              <div class="bg-lightBlue py-2 text-center relative">
                <span class="absolute left-4">
                  <span
                    class="rounded-full bg-navy w-3 h-3 inline-block"
                  ></span>
                  <span
                    class="rounded-full bg-navy w-3 h-3 inline-block"
                  ></span>
                  <span
                    class="rounded-full bg-navy w-3 h-3 inline-block"
                  ></span>
                </span>
                <label class="bg-navy py-1 px-8 text-yellow text-sm">
                  Preview
                </label>
              </div>
              <iframe
                crossorigin
                allow="cross-origin-isolated"
                id="runtime"
                class="flex-grow"
              ></iframe>
            </div>
          </div>
        </div>
      </div>

      <div class="relative">
        <img class="absolute top-0 right-0" src="images/sun-reflection.svg" />
      </div>

      <div class="flex container mx-auto my-16 relative">
        <div class="">
          <nav class="border border-lightBlue mr-8 p-2 list-none">
            <li class="text-yellow">
              <a href="#using-runno">Getting to know Runno</a>
            </li>
            <li class="pl-4">
              <a href="#using-runno">Using Runno</a>
            </li>
            <li class="pl-4">
              <a href="#how-it-works">How it works</a>
            </li>
            <li class="pl-4">
              <a href="#why-browser">Why the browser?</a>
            </li>
            <li class="pl-4">
              <a href="#limitations">Limitations</a>
            </li>
            <li class="pl-4">
              <a href="#security">Security</a>
            </li>
            <li class="text-yellow">
              <a href="#host-api">Host API</a>
            </li>
            <li class="pl-4">
              <a href="#">Quickstart</a>
            </li>
            <li class="pl-4">
              <a href="#">Methods</a>
            </li>
          </nav>
        </div>

        <div class="prose">
          <h1>Getting to know Runno</h1>
          <h2 id="using-runno">Using Runno</h2>
          <p>
            Choose a language from one of the available runtimes, then type in
            some code. HTML will be generated that can be embedded on your
            website to make the code run. You can choose to include controls,
            and an editor.
          </p>
          <p>
            You can also control the iframe using the
            <a href="#host-api">host API</a>. This can be used to pass in a
            virtual file system, and then collect <code>STDIN</code>,
            <code>STDOUT</code> and <code>STDERR</code> from the program. It can
            also be used to automate the running of code in both interactive and
            headless modes.
          </p>

          <h2 id="how-it-works">How it works</h2>
          <p>
            Runno uses Web Assembly to run code in the browser. Code runs in a
            unix-like sandbox that connects to a web-based terminal emulator.
            This means it behaves a lot like running code natively on a linux
            terminal. It's not perfect, but it's handy for making code examples
            run.
          </p>
          <p>
            When you click run on a Runno example the web assembly binary for
            that programming language is collected from
            <a href="https://wapm.io">WAPM</a> (the Web Assembly Package
            Manager). It's then run in a Web Worker, inside a sandbox with an
            in-memory file system. It's connected up to a terminal emulator and
            simple IO is routed back and forth.
          </p>

          <h2 id="why-browser">Why run in the browser?</h2>
          <p>
            The way Runno is built shifts the work of running code examples from
            the server to the client. Running code examples on your server is
            risky, it means having to implement protections from potentially
            hostile clients and limiting resources. This means that it's
            difficult to build a system that is open for anyone to use.
          </p>
          <p>
            If you're just writing a blog post, your own course, or writing
            documentation it's going to be difficult to implement this. You
            really want to use something that someone else has built. But that
            would mean running on their servers, which is going to cost you
            money! By running on the client you eliminate needing any third
            party involvement.
          </p>
          <p>
            Plus it's pretty cool that you can just run code in your browser!
          </p>

          <h2 id="limitations">Limitations</h2>
          <p>
            The programming languages available are limited by what has already
            been compiled to Web Assembly using WASI and uploaded to WAPM. A
            great way to help more languages become available would be to
            compile your favourite programming language tools to Web Assembly
            and upload them to WAPM.
          </p>
          <p>
            WASI doesn't provide a full linux environment, so most system based
            interfaces won't work. Packages and modules are also difficult to
            install inside the Runno environment. If you want to import code,
            you'll need to provide that code alongside your example.
          </p>
          <p>
            Runno is best for small code examples that use
            <code>STDIN</code> and <code>STDOUT</code>. That is typically the
            sort of thing that is taught in a CS1 course at university. This
            isn't an inherent limitation of the system though! As more work is
            put into Runno and the ecosystem of tools it depends on, more will
            become available.
          </p>

          <h2 id="security">Security</h2>
          <p>
            Running arbitrary code is always going to have some security risks,
            even if you're running it on the client. The goal of the Runno
            sandbox is to make it as safe as possible for a client to press run.
            They should be able to trust that their browser won't do anything
            they don't expect it to do.
          </p>
          <p>
            Because Runno runs within the browser on the client, you don't have
            to worry about it damaging your servers. But we also need to make
            sure Runno won't damage your clients.
          </p>
          <p>
            There are two main layers of sandboxing that help make Runno secure:
          </p>
          <ol>
            <li>
              By running as WebAssembly we create a layer of sandboxing, any
              system resources that the binary wants have to be passed through a
              layer of JavaScript that Runno controls.
            </li>
            <li>
              By embedding Runno inside an iframe from another domain we sandbox
              it from any secrets inside your webpage. This prevents Runno from
              having access to cookies or from making API calls as a user.
            </li>
          </ol>
          <p>
            With these two layers combined it's difficult for a user to hurt
            themselves, for you to hurt a user, or for users to hurt each other.
            But that doesn't mean Runno is 100% safe.
          </p>
          <p>
            Runno can quite easily be used to hog resources on a client. An
            infinite loop can lock up a tab. Large binaries can potentially be
            dynamically loaded from WAPM, using surprising amounts of bandwidth.
            While not ideal, these are typical risks a user has in navigating to
            any website.
          </p>
          <p>
            The intention is for Runno to either fix security issues, or to
            disclose the risks upfront. So if you find a security issue with the
            way Runno works, please
            <a href="mailto:security@taybenlor.com"
              >contact me (security@taybenlor.com)</a
            >!
          </p>

          <h2>Big thanks to</h2>

          <p>
            A number of open-source projects and standards have been used to
            make Runno possible. These include:
          </p>
          <ul>
            <li>
              Wasmer, WAPM, and WebAssembly.sh - the Wasmer team have built a
              lot of great tools for running Web Assembly. WAPM, the Web
              Assembly Package Manager is key to how Runno works. WebAssembly.sh
              was a great inspiration and starting point.
            </li>
            <li>
              WASI - the Web Assembly System Interface is a standard for
              interacting with code compiled for web assembly that makes it both
              secure and portable
            </li>
            <li>
              XTerm.js - a fully featured terminal that can be run in the
              browser
            </li>
            <li>
              The extensive work by many in the web development community on
              making native code and APIs run successfully inside the browser.
            </li>
          </ul>
          <p>
            Thanks to everyone who has built compatibility layers for the web.
            The web becomes a better platform with every new piece of software
            we can run on it!
          </p>

          <h1 id="host-api">Host API</h1>

          <h2>Quickstart</h2>
          <p></p>

          <h2>How it works</h2>
          <p></p>

          <h2>Methods</h2>
          <p></p>
        </div>
      </div>
    </main>
    <footer class="bg-white text-black">
      <div class="container mx-auto py-8 font-sans">
        <p>
          A passion project by
          <a class="text-pink" href="https://taybenlor.com">Ben Taylor</a> (<a
            class="text-pink"
            href="https://twitter.com/taybenlor"
            >@taybenlor</a
          >). The source is available
          <a class="text-pink" href="https://github.com/taybenlor/runno"
            >on GitHub</a
          >. Shoot me an email if you want to chat about Runno (<a
            class="text-pink"
            href="mailto:runno@taybenlor.com"
            >runno@taybenlor.com</a
          >).
        </p>
      </div>
    </footer>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
